package model

import (
	"crypto/rand"
	"fmt"
	"math/big"

	"github.com/google/uuid"
)

const (
	AliasFormatRandomWords = "words"
	AliasFormatRandomChars = "random"
	AliasFormatUUID        = "uuid"
	AliasFormatCatchAll    = "catch_all"
)

var (
	Adjectives = []string{
		"autumn", "hidden", "bitter", "misty", "silent", "empty", "dry", "dark", "summer", "icy", "quiet", "white", "spring", "winter", "patient", "twilight", "crimson", "wispy", "weathered", "blue", "billowing", "broken", "cold", "damp", "falling", "frosty", "green", "long", "late", "lingering", "little", "muddy", "old", "red", "rough", "still", "small", "sparkling", "shy", "wandering", "withered", "wild", "black", "young", "solitary", "aged", "snowy", "floral", "restless", "ancient", "purple", "nameless", "able", "active", "actual", "adept", "admiral", "adoring", "adroit", "affable", "agile", "airy", "alert", "alive", "amazing", "ample", "amused", "angelic", "apt", "arch", "artful", "artsy", "ashamed", "aspire", "astute", "at ease", "austere", "avid", "awake", "aware", "awesome", "balanced", "bald", "basic", "beaming", "beloved", "best", "big", "blessed", "blissful", "blithe", "bold", "bossy", "brainy", "brave", "brief", "bright", "brisk", "broad", "bubbly", "buoyant", "calm", "canny", "capable", "caring", "casual", "charmed", "cheerful", "chic", "chilled", "choice", "civil", "classy", "clean", "clear", "clever", "close", "cloudy", "coarse", "coherent", "cold", "coltish", "comfy", "compact", "cool", "cozy", "crisp", "cute", "dandy", "dapper", "daring", "dauntless", "dear", "decent", "deep", "deft", "dense", "devout", "diligent", "diplomat", "divine", "droll", "drunk", "dry", "due", "dulcet", "dumb", "durable", "eager", "early", "earnest", "easy", "eclectic", "edgy", "elite", "elvish", "embossed", "eminent", "endless", "enough", "euphoric", "even", "exalted", "exact", "expert", "exposed", "fair", "famous", "fancy", "fast", "fearless", "fecund", "feral", "fiery", "fit", "flashy", "flat", "flawless", "fleet", "fluid", "flush", "foamy", "fond", "forlorn", "formal", "forte", "frank", "free", "fresh", "frisky", "funny", "fussy", "future", "fuzzy", "gallant", "game", "gentle", "genuine", "giving", "glad", "glossy", "glum", "gold", "good", "goofy", "graceful", "grand", "grave", "great", "grim", "gruff", "guarded", "guiltless", "handy", "hard", "hasty", "hazy", "heavy", "hefty", "heroic", "high", "hollow", "holy", "homey", "hot", "hushed", "ideal", "idyllic", "immune", "immense", "inspired", "intact", "intense", "inviting", "irate", "itchy", "jolly", "joyful", "juicy", "just", "keen", "kind", "knowing", "lanky", "large", "last", "late", "lawful", "lean", "left", "legal", "light", "lithe", "little", "live", "lively", "local", "logical", "lone", "long", "loose", "lost", "loud", "loyal", "lucid", "lucky", "lush", "luxe", "mad", "magical", "main", "major", "manic", "marked", "married", "massive", "mealy", "meek", "mellow", "merry", "mighty", "mild", "modern", "modest", "moot", "moral", "mute", "muted", "naive", "narrow", "nasty", "natural", "neat", "new", "nice", "nifty", "nimble", "noble", "noisy", "noted", "novel", "numb", "nutty", "obese", "odd", "old", "open", "opulent", "optimal", "patient", "peppy", "perky", "petite", "petty", "polished", "polite", "poor", "posh", "potent", "practical", "precise", "pretty", "prime", "prior", "private", "prized", "prone", "proper", "proud", "prudent", "pumped", "pure", "purple", "quick", "quiet", "rapid", "rare", "rational", "ready", "real", "regal", "rich", "right", "robust", "romantic", "rosy", "rough", "round", "routine", "rude", "sad", "safe", "sage", "saintly", "salty", "sane", "sassy", "savvy", "secure", "selfish", "serene", "severe", "sharp", "shiny", "short", "shy", "silent", "silky", "silly", "simple", "single", "sleek", "slim", "slimy", "slow", "small", "smart", "smiling", "snappy", "snug", "solid", "somber", "sonic", "sordid", "sound", "spare", "sparse", "spicy", "splendid", "spry", "stable", "staid", "stale", "starry", "stark", "staunch", "steady", "steep", "stiff", "stony", "strange", "strong", "sturdy", "suave", "subtle", "sunny", "super", "sure", "sweet", "swift", "tall", "tame", "tart", "tasty", "taut", "tepid", "terse", "tidy", "tight", "timely", "tiny", "top", "torn", "tough", "tranquil", "trendy", "true", "trusted", "typical", "ultimate", "unbiased", "uncommon", "unique", "upbeat", "upright", "urban", "useful", "vague", "vain", "valid", "vapid", "vast", "vibrant", "victor", "vigilant", "vigorous", "virtuous", "vital", "vivid", "vocal", "wacky", "waggish", "wary", "warm", "wary", "wealthy", "wee", "weird", "well", "wet", "whole", "wicked", "wily", "witty", "wise", "wobbly", "wooded", "woody", "worthy", "young", "youthful", "zany", "zesty", "zippy",
		"abrasive", "abundant", "academic", "accessible", "accommodating", "accomplished", "accountable", "accurate", "acidic", "acoustic", "actionable", "adaptive", "additional", "administrative", "advanced", "advantageous", "aerial", "aesthetic", "affordable", "aggressive", "agreeable", "agricultural", "alkaline", "allegorical", "alternate", "ambitious", "analytical", "anatomical", "anonymous", "anticipatory", "anxious", "aromatic", "artificial", "assertive", "atmospheric", "atomic", "attractive", "authentic", "authoritative", "autonomous", "awkward", "bacterial", "barren", "behavioral", "beneficial", "bilingual", "biological", "brittle", "bureaucratic", "candid", "carbonated", "categorical", "ceremonial", "chaotic", "chemical", "chronological", "circular", "climatic", "clinical", "cognitive", "collaborative", "collective", "commercial", "communal", "comparative", "compassionate", "competitive", "comprehensive", "computational", "conceptual", "concrete", "confidential", "conscious", "conservative", "consistent", "constructive", "contagious", "contemporary", "contextual", "conventional", "cooperative", "corrective", "corruptible", "cosmic", "costly", "courageous", "courteous", "critical", "cultural", "cumulative", "curious", "cynical", "daily", "decisive", "decorative", "defensive", "deliberate", "democratic", "dependent", "descriptive", "desirable", "destructive", "determined", "developmental", "different", "digital", "direct", "discretionary", "distinctive", "domestic", "dominant", "dramatic", "dual", "dynamic", "economic", "educational", "effective", "efficient", "elastic", "electrical", "electronic", "elegant", "emotional", "empirical", "empty-handed", "energetic", "engineered", "enhanced", "enormous", "entertaining", "ethical", "evaluative", "evolutionary", "exceptional", "exclusive", "executive", "explicit", "expressive", "external", "factual", "familial", "fictional", "finite", "flexible", "focused", "forbidden", "foreign", "formalized", "foundational", "fractional", "fragile", "functional", "fundamental", "futuristic", "generalized", "geometric", "governmental", "grammatical", "graphic", "gross", "habitual", "harmonic", "hierarchical", "historical", "hypothetical", "identical", "ideological", "illogical", "imaginary", "immediate", "implicit", "important", "improbable", "inclusive", "incomplete", "independent", "industrial", "inevitable", "influential", "informal", "innovative", "instrumental", "intellectual", "interactive", "internal", "interpretive", "intimate", "intrinsic", "inverse", "invisible", "ironic", "isolated", "judicial", "kinetic", "latent", "lateral", "lexical", "liberal", "linear", "linguistic", "literal", "literary", "longitudinal", "marginal", "mathematical", "mechanical", "medial", "memorable", "metaphorical", "microscopic", "migratory", "minimal", "minor", "mobile", "monetary", "monthly", "municipal", "narrative", "national", "negative", "neural", "nominal", "nonlinear", "normative", "nutritional", "objective", "observational", "occasional", "occupational", "offensive", "operational", "optional", "orderly", "original", "outgoing", "overcast", "parallel", "partial", "passive", "perceptual", "periodic", "persistent", "personal", "physical", "pictorial", "planetary", "plausible", "political", "portable", "positive", "predictive", "preliminary", "preventative", "primary", "procedural", "productive", "progressive", "promotional", "proportional", "prospective", "psychological", "public", "qualitative", "quantitative", "quarterly", "radial", "random", "reactive", "readable", "realistic", "recreational", "reflective", "regional", "regulatory", "relational", "reliable", "remote", "renewable", "repetitive", "residential", "residual", "resistant", "responsive", "restricted", "rigorous", "rural", "sanitary", "scholarly", "seasonal", "secondary", "selective", "semantic", "sensitive", "sequential", "significant", "simulated", "situational", "social", "spatial", "specialized", "speculative", "statistical", "structural", "subjective", "superficial", "supplemental", "symbolic", "synthetic", "systematic", "technical", "temporal", "territorial", "theoretical", "thermal", "thorough", "transactional", "transferable", "transitional", "transparent", "tropical", "unilateral", "universal", "unofficial", "unpredictable", "unrestricted", "unstable", "upward", "utilitarian", "variable", "vertical", "viable", "virtual", "visible", "voluntary", "vulnerable", "weekly", "western", "wholesale", "willing", "wireless", "workable", "worldwide", "yearly", "bioactive",
	}
	Nouns = []string{
		"waterfall", "breeze", "moon", "wind", "sea", "snow", "lake", "sunset", "pine", "shadow", "leaf", "dawn", "glitter", "forest", "hill", "cloud", "meadow", "sun", "glade", "bird", "brook", "butterfly", "bush", "dew", "dust", "field", "fire", "flower", "firefly", "feather", "grass", "haze", "mountain", "night", "pond", "darkness", "snowflake", "silence", "sound", "sky", "shape", "surf", "thunder", "violet", "water", "wildflower", "wave", "water", "resonance", "sun", "wood", "dream", "cherry", "tree", "fog", "frost", "voice", "paper", "frog", "smoke", "star", "ability", "absence", "academy", "account", "achieve", "acquire", "address", "advance", "advice", "affairs", "affect", "agency", "airline", "airport", "alarm", "alcohol", "allergy", "amateur", "ambition", "analyst", "anxiety", "apology", "appeal", "apple", "appoint", "area", "arrival", "article", "artist", "aspect", "attempt", "auction", "audience", "average", "award", "baggage", "balance", "balloon", "barrier", "battery", "battle", "beauty", "bedroom", "belief", "benefit", "bicycle", "biology", "blanket", "block", "board", "bottle", "bottom", "boundary", "bowl", "branch", "breath", "bridge", "brother", "builder", "bunch", "burden", "butter", "button", "cabin", "camera", "campaign", "candle", "canvas", "carbon", "career", "carpet", "cartoon", "catalog", "cause", "ceiling", "cellar", "cemetery", "center", "chamber", "chance", "change", "chapter", "charity", "chicken", "child", "choice", "church", "circuit", "citizen", "clarity", "classic", "climate", "clinic", "closet", "clothes", "cloud", "coast", "college", "comfort", "command", "company", "concept", "concert", "conduct", "conflict", "consent", "contest", "context", "control", "convert", "cooking", "copy", "corner", "costume", "cottage", "council", "country", "courage", "crash", "credit", "crisis", "critic", "culture", "current", "custom", "damage", "debate", "debt", "decade", "deficit", "delight", "demand", "density", "deposit", "depth", "desire", "detail", "device", "dialogue", "diet", "dinner", "disease", "display", "divorce", "doctor", "dollar", "domain", "donor", "driver", "duty", "eagle", "economy", "editor", "effort", "elder", "election", "element", "elite", "employ", "energy", "engine", "enquiry", "entry", "episode", "equity", "escape", "estate", "ethics", "evening", "exhibit", "expense", "expert", "extent", "faculty", "failure", "family", "fantasy", "farmer", "fashion", "father", "feature", "feedback", "festival", "fiction", "figure", "filter", "finance", "finding", "finger", "finish", "fire", "fish", "fitness", "flight", "flower", "focus", "folder", "football", "forecast", "formula", "fortune", "forum", "fossil", "foundation", "freedom", "friend", "funnel", "future", "gallery", "garden", "gas", "gateway", "gender", "genius", "ghost", "gift", "glance", "goal", "gold", "governor", "graduate", "grand", "grape", "graphic", "grass", "gravity", "ground", "growth", "guest", "guidance", "guitar", "habit", "half", "hall", "hand", "harvest", "health", "hearing", "heart", "height", "heritage", "hero", "hiking", "history", "holiday", "home", "honey", "honor", "horror", "hospital", "host", "hotel", "hour", "house", "human", "hunger", "husband", "ice", "idea", "image", "impact", "impress", "income", "index", "industry", "infant", "inflame", "inquiry", "insight", "inspire", "install", "institute", "insult", "insurance", "intact", "intake", "interest", "interior", "internet", "interview", "investor", "invitation", "iron", "island", "issue", "item", "jacket", "jazz", "jeans", "job", "journal", "judge", "juice", "junior", "jury", "kitchen", "knight", "knowledge", "labour", "lack", "ladder", "land", "language", "laptop", "large", "laser", "laugh", "lawyer", "leader", "league", "leather", "lecture", "legacy", "legend", "length", "lesson", "level", "library", "license", "lifeline", "lifestyle", "lifetime", "light", "limit", "link", "lip", "liquid", "list", "literary", "living", "lobby", "lock", "logic", "lottery", "lounge", "loyalty", "luck", "lunch", "luxury", "machine", "magazine", "magic", "magnet", "mailbox", "mainland", "major", "manager", "manner", "manual", "marble", "margin", "marriage", "market", "marvel", "master", "match", "mate", "matrix", "maximum", "mayor", "meal", "meaning", "media", "medicine", "medium", "meeting", "melody", "memory", "mentor", "merchant", "message", "metal", "method", "middle", "midnight", "milk", "million", "mind", "mineral", "minimum", "minister", "minor", "minute", "mirror", "mission", "model", "modern", "moment", "money", "monster", "month", "moral", "morning", "mortgage", "mother", "motion", "motive", "motor", "mountain", "mouse", "mouth", "movement", "movie", "mud", "muscle", "museum", "music", "mystery", "narrow", "nation", "nature", "neat", "nerve", "network", "news", "night", "nobody", "noise", "nominee", "normal", "north", "nose", "notebook", "notice", "novel", "nucleus", "number", "nursery", "object", "ocean", "offense", "offer", "office", "officer", "onion", "opening", "opera", "opinion", "option", "orange", "order", "organic", "outcome", "outlook", "output", "outside", "oven", "owner", "oxygen", "package", "page", "pain", "paint", "pair", "panel", "panic", "paper", "parent", "park", "partner", "party", "passage", "passion", "past", "patient", "pattern", "payment", "peace", "peak", "penalty", "people", "percent", "period", "permit", "person", "phase", "phone", "photo", "phrase", "physics", "piano", "picture", "piece", "pile", "pillar", "pilot", "pistol", "pitch", "place", "plan", "plane", "planet", "plant", "plate", "play", "player", "plenty", "plumber", "poet", "policy", "poll", "pool", "poetry", "portion", "position", "positive", "post", "potato", "praise", "prayer", "precede", "premium", "price", "pride", "primary", "prince", "print", "priority", "prison", "privacy", "prize", "problem", "process", "produce", "product", "profile", "program", "progress", "project", "promise", "promotion", "proof", "property", "proposal", "prospect", "protest", "provide", "public", "purpose", "puzzle", "quality", "quantity", "quarter", "queen", "quest", "question", "quick", "quiet", "quote", "rabbit", "race", "radio", "rain", "raise", "range", "rank", "rate", "ratio", "reach", "reaction", "reader", "reality", "reason", "recipe", "record", "recycle", "refuge", "region", "regret", "regular", "reliable", "relief", "remark", "remedy", "report", "request", "require", "rescue", "research", "reserve", "residue", "resist", "resolve", "resort", "resource", "respect", "respond", "result", "retailer", "retreat", "return", "revenue", "review", "reward", "rhythm", "rice", "riches", "ride", "ring", "risk", "ritual", "river", "road", "robot", "actor", "admin", "agent", "alarmist", "alloy", "anchor", "angle", "animal", "answer", "anthem", "armor", "array", "asset", "atlas", "atom", "author", "avatar", "axle", "badge", "band", "bank", "banner", "bar", "base", "basin", "beam", "belt", "bench", "berry", "bias", "bill", "bin", "blade", "blast", "bond", "bonus", "booth", "boss", "brace", "brand", "brick", "broker", "bug", "bulb", "bus", "buyer", "byte", "cable", "cage", "cap", "captain", "case", "cash", "cave", "chain", "chair", "charge", "chart", "check", "chip", "chord", "claim", "clerk", "clip", "code", "coin", "column", "comic", "compass", "cook", "core", "court", "craft", "crew", "cue", "curve", "cycle", "data", "deal", "desk", "dial", "disk", "dock", "draft", "drill", "drum", "duct", "edge", "egg", "email", "emblem", "end", "error", "essay", "exam", "exit", "factor", "fame", "farm", "fee", "file", "flag", "flame", "fleet", "flex", "flood", "flux", "frame", "fraud", "fuel", "gap", "gear", "gene", "grid", "grip", "group", "guard", "guide", "gun", "habitant", "handle", "hash", "hatch", "hazard", "helmet", "hinge", "hint", "hook", "horn", "hub", "humor", "hunt", "icon", "id", "input", "insect", "intent", "jail", "jet", "joint", "key", "kick", "kit", "label", "lamp", "lane", "law", "layer", "lead", "lens", "lever", "log", "loop", "lure", "map", "mark", "mask", "maze", "medal", "memo", "mesh", "meter", "mix", "mode", "module", "mold", "monk", "mood", "myth", "nail", "name", "node", "note", "nut", "oath", "odds", "oil", "orbit", "organ", "origin", "outlet", "pace", "pact", "pad", "palm", "path", "pause", "pawn", "peer", "peg", "phrase", "pit", "plot", "plug", "port", "pose", "postman", "press", "pulse", "pump", "punch", "radar", "rail", "ramp", "ray", "realm", "reel", "rent", "reply", "reset", "route", "row", "rule", "run", "sack", "sail", "sample", "scale", "scan", "score", "script", "seal", "sector", "seed", "sense", "server", "shade", "shaft", "shell", "shift", "signal", "site", "sketch", "skin", "slot", "socket", "soldier", "spark", "speech", "spike", "spin", "spine", "split", "stack", "stage", "stamp", "status", "stem", "step", "stick", "stock", "strain", "stream", "stripe", "studio", "surge", "switch", "symbol", "table", "tag", "tank", "tape", "task", "team", "tempo", "term", "text", "theme", "thread", "thumb", "tick", "tile", "timer", "tip", "token", "tone", "tool", "track", "trade", "trait", "trap", "tray", "trend", "tribe", "trick", "troop", "tube", "turn", "tutor", "unit", "user", "value", "vector", "vendor", "verse", "vest", "veto", "video", "view", "visa", "volume", "vote", "wage", "ward", "warp", "waste", "watch", "week", "wheel", "width", "will", "wing", "wire", "word", "work", "worth", "yard", "zone", "zoom", "administ", "backend", "buffer", "checksum", "cluster", "compiler", "console", "cookie", "daemon", "dataset", "decoder", "encoder", "endpoint", "firmware", "frontend", "gateway", "handler", "indexer", "kernel", "latency", "logfile", "manifest", "namespace", "operand", "payload", "pipeline", "pointer", "protocol", "queue", "runtime", "sandbox", "schema", "scriptlet", "session", "snippet", "socketed", "stacker", "syscall", "threader", "timeout", "tracer", "unicode", "uptime", "validator", "variable", "version", "wrapper", "workflow", "allocator", "callback", "datastore", "executor", "iterator", "middleware", "observer", "operator", "optimizer", "registry", "scheduler", "tokenizer", "uploader", "verifier", "watcher", "webhook", "workload", "adapter", "backlog", "diff", "entryway", "gridline", "keyframe", "metadata", "overlay", "permalink", "renderer", "snapshot", "stylesheet", "workspace",
	}
)

func GenerateAlias(format string, sufix string) string {
	switch format {
	case AliasFormatRandomChars:
		return generateRandomChars()
	case AliasFormatUUID:
		return uuid.New().String()
	case AliasFormatCatchAll:
		return fmt.Sprintf("*+%s", sufix)
	default:
		return generateRandomWords()
	}
}

func generateRandomChars() string {
	var letterRunes = []rune("abcdefghijklmnopqrstuvwxyz0123456789")
	b := make([]rune, 8)
	for i := range b {
		index, err := cryptoRandInt(len(letterRunes))
		if err != nil {
			// Handle error, return empty string or fallback
			return ""
		}
		b[i] = letterRunes[index]
	}
	return string(b)
}

func generateRandomWords() string {
	adjective := randomAdjective()
	noun := randomNoun()
	number := randomNumber()

	return adjective + "." + noun + number
}

func randomAdjective() string {
	index, err := cryptoRandInt(len(Adjectives))
	if err != nil {
		// Handle error, return fallback
		return ""
	}
	return Adjectives[index]
}

func randomNoun() string {
	index, err := cryptoRandInt(len(Nouns))
	if err != nil {
		// Handle error, return fallback
		return ""
	}
	return Nouns[index]
}

func randomNumber() string {
	num1, err := cryptoRandInt(10) // Generates a number between 0-9
	if err != nil {
		return "00" // Fallback
	}
	num2, err := cryptoRandInt(10)
	if err != nil {
		return fmt.Sprintf("%d0", num1)
	}
	num3, err := cryptoRandInt(10)
	if err != nil {
		return fmt.Sprintf("%d%d0", num1, num2)
	}
	return fmt.Sprintf("%d%d%d", num1, num2, num3)
}

// cryptoRandInt generates a random integer between 0 and max-1 using crypto/rand.
func cryptoRandInt(max int) (int, error) {
	nBig, err := rand.Int(rand.Reader, big.NewInt(int64(max)))
	if err != nil {
		return 0, err
	}
	return int(nBig.Int64()), nil
}
